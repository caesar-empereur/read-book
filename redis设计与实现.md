## 15章 复制
#### Redis的复制功能分为同步（sync）和命令传播（commandpropagate）两个操作
- [同步](#同步)操作用于将从服务器的数据库状态更新至主服务器当前所处的数据库状态
```
1 从服务器向主服务器发送SYNC命令
2 收到SYNC命令的主服务器执行BGSAVE命令，在后台生成一个RDB文件
3 将BGSAVE命令生成的RDB文件发送给从服务器
4 从服务器将自己的数据库状态更新至主服务器执行BGSAVE命令时的数据库状态。
```

- ==命令传播==操作则用于同步操作后致主从服务器的数据库状态出现不一致时，让主从服务器的数据库重新回到一致状态。
```
1 主服务器数据变化后，会将自己执行的写命令发送给从服务器执行
2 当从服务器执行了相同的写命令之后，主从服务器将再次回到一致状态
```
- ==旧版同步操作缺陷==
```
1 主从同步过一次后断线再进行同步，会执行上一步的同步的内容(没有必要，需要的是需要同步断线后主服务器变动的数据)
2 sync 操作耗时耗资源，需要主 执行 BGSAVE生成RDB文件，传输给从，消耗CPU内存磁盘资源
3 从服务器接受到RDB文件后载入RDB文件，这时服务器会阻塞，无法处理客户端请求
```
